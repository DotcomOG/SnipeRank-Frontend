<!DOCTYPE html>
<html lang="en">
<head>
  <!-- analyze.html ‚Äî v4.0.0 (Free Quick Analysis)
       - Purpose: High-level AI SEO scan to motivate full report / consult
       - Includes: Score card, shimmer loading, blocking overlay, retry + fallback
       - Compatible endpoint: /api/score?url=...
       - Backend fallback: https://sniperank-app2.onrender.com
       - Last updated: Oct 30, 2025
  -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SnipeRank ‚Äî AI SEO Quick Analysis (Free)</title>

  <style>
    :root{
      --max-width:960px; --pad-v:3vh; --pad-h:2rem;
      --muted:#6b7280; --border:#e5e7eb; --text:#0f172a; --bg:#fff;
      --btn:#dc3545; --btn-hover:#c82333;
      --chip:#f8fafc; --chip-border:#e5e7eb;
    }
    *{box-sizing:border-box}
    body{
      font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Helvetica,Arial,sans-serif;
      background:#fff;color:var(--text);margin:0;
      padding:var(--pad-v) var(--pad-h);max-width:var(--max-width);margin-inline:auto;
    }
    h1{font-size:3rem;margin:0 0 .25em;line-height:1;letter-spacing:-.5px}
    h1 span{color:#3182CE}
    h2{margin:.25rem 0 2rem;color:#111;font-size:1.25rem;font-weight:800}
    .row{display:flex;align-items:center;justify-content:space-between;margin:.25rem 0 1rem;color:var(--muted);font-size:.95rem}
    .row strong{color:#000}

    .card{border:1px solid var(--border);border-radius:12px;background:#fff;box-shadow:0 1px 2px rgba(0,0,0,.04)}
    .score-card{padding:16px 18px;margin:0 0 28px;position:relative;overflow:hidden}
    .score-top{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
    .score-num{display:flex;align-items:baseline;gap:10px}
    .score{font-size:2.5rem;font-weight:900}
    .band{color:var(--muted);font-weight:600}
    .pillars{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:12px}
    .chip{display:flex;align-items:center;justify-content:space-between;padding:8px 10px;border-radius:10px;border:1px solid var(--chip-border);background:var(--chip);font-weight:700}
    .chip span:last-child{font-weight:800}
    .btns{display:flex;gap:8px;margin-top:12px}
    .btn{border:1px solid #111;background:#fff;color:#111;padding:.55rem .9rem;border-radius:8px;cursor:pointer;font-weight:700;font-size:.95rem}
    .btn:hover{background:#f3f4f6}

    /* Sections */
    .section{margin:24px 0}
    .section h3{font-size:1.15rem;margin:0 0 .75rem}
    ul.klist{margin:.25rem 0 0 1.1rem;padding:0}
    ul.klist li{margin:.45rem 0;line-height:1.6}
    .hidden{display:none}

    /* CTA + form */
    .cta-card{padding:18px;margin:28px 0;border:1px solid #e0e7ff;background:#f8f9ff;border-radius:12px;text-align:center}
    .cta-card p{margin:.25rem 0 1rem;color:#4338ca}
    .cta-actions{display:flex;gap:14px;justify-content:center;flex-wrap:wrap}
    .cta-primary,.cta-secondary{
      border:none;border-radius:999px;padding:.85rem 1.25rem;font-weight:800;color:#fff;background:var(--btn);cursor:pointer;text-decoration:none;
      display:inline-block;
    }
    .cta-primary:hover,.cta-secondary:hover{background:var(--btn-hover)}

    /* --- Loading animation (score shimmer) --- */
    .score-card.loading{
      animation:pulse-shimmer 2s ease-in-out infinite;
    }
    .score-card.loading::before{
      content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;
      background:linear-gradient(90deg,transparent,rgba(255,255,255,0.45),transparent);
      animation:shimmer 2s ease-in-out infinite;
    }
    @keyframes pulse-shimmer{
      0%,100%{box-shadow:0 1px 2px rgba(0,0,0,.04)}
      50%{box-shadow:0 6px 26px rgba(49,130,206,.22)}
    }
    @keyframes shimmer{0%{left:-100%}100%{left:100%}}

    /* Blocking Lightbox */
    .overlay{position:fixed;inset:0;background:rgba(255,255,255,.96);display:flex;align-items:center;justify-content:center;z-index:1000}
    .hidden{display:none!important}
    .panel{width:min(520px,92vw);background:#fff;border:1px solid var(--border);border-radius:16px;box-shadow:0 10px 40px rgba(0,0,0,.12);padding:22px 20px;position:relative;overflow:hidden}
    .panel.loading{animation:pulse-shimmer 2s ease-in-out infinite}
    .panel.loading::before{
      content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;
      background:linear-gradient(90deg,transparent,rgba(255,255,255,0.55),transparent);
      animation:shimmer 2s ease-in-out infinite;
    }
    .p-title{font-weight:900;font-size:18px;margin:0 0 10px}
    .p-sub{color:#6b7280;font-size:14px;margin:0 0 12px}
    .bar{height:12px;border-radius:8px;background:#eee;overflow:hidden;margin:12px 0}
    .fill{height:100%;border-radius:8px;background:linear-gradient(90deg,#3182CE,#1a73e8);width:0%}
    .p-eta{color:#6b7280;font-size:14px}
    .timeout{display:none;margin-top:14px;border-top:1px dashed #e5e7eb;padding-top:12px}
    .timeout strong{color:#111}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .ghost{border:1px solid #111;background:#fff;color:#111;padding:.6rem 1rem;border-radius:10px;font-weight:800;cursor:pointer}
    .primary{border:none;background:var(--btn);color:#fff;padding:.6rem 1rem;border-radius:999px;font-weight:800;cursor:pointer}
    .primary:hover{background:var(--btn-hover)}

    .footer{color:#6b7280;font-size:.9rem;margin:36px 0 8px;text-align:center}
  </style>
</head>
<body>
  <h1>Snipe<span>Rank</span></h1>
  <h2>AI SEO Quick Analysis (Free)</h2>

  <div class="row">
    <div>Powered by <a href="https://quontora.com" target="_blank" rel="noopener">quontora</a></div>
    <div>Analysis for: <strong id="current-url">‚Äî</strong></div>
  </div>

  <!-- SCORE CARD -->
  <section class="card score-card loading" id="scoreCard" aria-live="polite">
    <div class="score-top">
      <div class="score-num">
        <div class="score" id="scoreNumber">‚Äî</div>
        <div class="band" id="scoreBand">Analyzing‚Ä¶</div>
      </div>
      <div class="btns">
        <button class="btn" id="breakdownBtn" type="button">What goes into this score?</button>
        <button class="btn" id="copyBtn" type="button" disabled>Copy Summary</button>
      </div>
    </div>
    <div class="pillars" id="pillarsGrid">
      <div class="chip"><span>AI Access Readiness</span><span>‚Äî/25</span></div>
      <div class="chip"><span>Trust & Verification Signals</span><span>‚Äî/25</span></div>
      <div class="chip"><span>LLM Interpretability & Clarity</span><span>‚Äî/25</span></div>
      <div class="chip"><span>Prompt-Pattern Alignment</span><span>‚Äî/25</span></div>
    </div>
  </section>

  <!-- WORKING / ISSUES -->
  <section class="section hidden" id="workingSection">
    <h3>What‚Äôs Working Well</h3>
    <ul id="workingList" class="klist"></ul>
  </section>

  <section class="section hidden" id="issuesSection">
    <h3>Where You Can Improve</h3>
    <ul id="issuesList" class="klist"></ul>
  </section>

  <!-- CTA -->
  <div class="cta-card">
    <h3 style="margin:.25rem 0 .5rem">Want the Full Breakdown & Step-by-Step Fixes?</h3>
    <p>Get your detailed AI SEO report and a free 30-minute consultation.</p>
    <div class="cta-actions">
      <a class="cta-primary" href="#report-form">Get My Full Report (Free)</a>
      <a class="cta-secondary" href="https://calendly.com/quontora" target="_blank" rel="noopener">Book Consultation</a>
    </div>
  </div>

  <!-- FORM -->
  <section id="report-form" class="section card" style="padding:18px">
    <h3>Get Your Detailed Report</h3>
    <form id="full-report-form" novalidate>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
        <input type="text" id="name-input" placeholder="Your Name" required />
        <input type="email" id="email-input" placeholder="Your Email" required />
        <input type="tel" id="phone-input" placeholder="Your Phone (optional)" />
        <input type="text" id="company-input" placeholder="Your Company (optional)" />
        <textarea id="context-input" placeholder="Share context or questions for your consult." style="grid-column:1/-1;min-height:90px"></textarea>
      </div>
      <div id="form-error" style="color:#c00;margin-top:8px;display:none"></div>
      <button id="full-report-btn" type="submit" class="cta-primary" style="margin-top:12px">Get My Full Report</button>
    </form>
  </section>

  <!-- SCORE BREAKDOWN MODAL -->
  <div class="overlay hidden" id="breakdown">
    <div class="panel">
      <div class="p-title">What goes into your SnipeRank score?</div>
      <div class="p-sub">
        <p><strong>üéØ AI Access Readiness</strong> ‚Äî Crawlability, load, and structure for AI crawlers.</p>
        <p><strong>üîí Trust & Verification</strong> ‚Äî Authorship, HTTPS, and reputation signals.</p>
        <p><strong>üìù LLM Clarity</strong> ‚Äî Schema, headings, and semantic patterns.</p>
        <p><strong>üîç Prompt-Pattern Alignment</strong> ‚Äî Q&A and topical coverage for AI search.</p>
      </div>
      <div class="actions" style="justify-content:flex-end">
        <button class="ghost" id="closeBreakdown" type="button">Close</button>
      </div>
    </div>
  </div>

  <!-- BLOCKING LIGHTBOX -->
  <div class="overlay" id="progress">
    <div class="panel loading" id="progressPanel">
      <div class="p-title">Analyzing your website‚Ä¶</div>
      <div class="p-sub">Checking structure, visibility, and AI search readiness.</div>
      <div class="bar"><div class="fill" id="pFill"></div></div>
      <div class="p-eta" id="pEta">This usually takes 15‚Äì45 seconds.</div>
      <div class="timeout" id="timeoutBox">
        <p><strong>Still working‚Ä¶</strong> You can keep waiting, retry, or get the full report by email.</p>
        <div class="actions">
          <button class="ghost" id="keepWaitingBtn" type="button">Keep Waiting</button>
          <button class="ghost" id="retryBtn" type="button">Retry Now</button>
          <a class="primary" href="#report-form">Get Full Report</a>
        </div>
      </div>
    </div>
  </div>

  <div class="footer">¬© 2025 SnipeRank by <a href="https://quontora.com" target="_blank" rel="noopener">quontora.com</a></div>

  <script>
    const $=id=>document.getElementById(id);
    const params=new URLSearchParams(window.location.search);
    const targetUrl=params.get('url')||'';
    $("current-url").textContent=targetUrl||'‚Äî';
    const PROBE_TIMEOUT=10000, TIMEOUT_MS=25000;
    let progressTimer, timeoutTimer;

    function extractDomain(u){
      try{return new URL(/^https?:\/\//i.test(u)?u:`https://${u}`).hostname.replace(/^www\./,'')}catch{return''}
    }
    function startProgress(){let p=0;progressTimer=setInterval(()=>{$("pFill").style.width=(p=Math.min(p+Math.random()*3,90))+'%'},120);}
    function completeProgress(){clearInterval(progressTimer);$("pFill").style.width='100%';setTimeout(()=>$("progress").classList.add('hidden'),500);}
    function showTimeout(){$("progressPanel").classList.remove('loading');$("timeoutBox").style.display='block';}
    function resetOverlay(){ $("timeoutBox").style.display='none';$("progressPanel").classList.add('loading');$("pFill").style.width='0%';startProgress();startTimeouts();}
    function startTimeouts(){clearTimeout(timeoutTimer);timeoutTimer=setTimeout(showTimeout,TIMEOUT_MS);}
    $("retryBtn").onclick=()=>{resetOverlay();loadAll(true);};
    $("keepWaitingBtn").onclick=()=>startTimeouts();
    $("breakdownBtn").onclick=()=>$("breakdown").classList.remove('hidden');
    $("closeBreakdown").onclick=()=>$("breakdown").classList.add('hidden');
    $("breakdown").onclick=e=>{if(e.target===$("breakdown"))$("breakdown").classList.add('hidden');};

    $("copyBtn").onclick=async()=>{
      const score=$("scoreNumber").textContent,txt=`Website: ${targetUrl}\nSnipeRank Score: ${score}\nGet full report: ${window.location.origin}/full-report.html`;
      try{await navigator.clipboard.writeText(txt);const b=$("copyBtn");const t=b.textContent;b.textContent="Copied!";setTimeout(()=>b.textContent=t,1200);}catch{window.prompt("Copy summary:",txt);}
    };

    $("full-report-form").onsubmit=e=>{
      e.preventDefault();
      const name=$("name-input").value.trim(),email=$("email-input").value.trim();
      if(!name||!email){$("form-error").textContent="Please provide your name and email.";$("form-error").style.display='block';return;}
      const domain=extractDomain(targetUrl);
      sessionStorage.setItem('sniperank:name',name);
      sessionStorage.setItem('sniperank:email',email);
      sessionStorage.setItem('sniperank:url',targetUrl);
      window.location.href=`full-report.html?url=${encodeURIComponent(targetUrl)}&name=${encodeURIComponent(name)}&email=${encodeURIComponent(email)}&domain=${domain}`;
    };

    function renderScore(score,p){$("scoreNumber").textContent=score+"/100";$("scoreBand").textContent=score>=70?"Highly Visible ‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ":score>=55?"Partially Visible ‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ":score>=40?"Needs Work ‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ":"Low Visibility ‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ";$("pillarsGrid").innerHTML=[["AI Access Readiness",p.access],["Trust & Verification",p.trust],["LLM Clarity",p.clarity],["Prompt Alignment",p.alignment]].map(([l,v])=>`<div class='chip'><span>${l}</span><span>${v}/25</span></div>`).join('');$("scoreCard").classList.remove('loading');$("copyBtn").disabled=false;}
    function setList(el,arr){el.innerHTML=arr.map(x=>`<li>${x}</li>`).join('');}
    async function decideApi(){try{const ctl=new AbortController();const t=setTimeout(()=>ctl.abort(),PROBE_TIMEOUT);const r=await fetch('/api/score?url=https://example.com',{method:'HEAD',signal:ctl.signal});clearTimeout(t);if(!r.ok)throw 0;return '';}catch{return'https://sniperank-app2.onrender.com';}}
    async function loadAll(){
      if(!targetUrl){showTimeout();return;}
      const api=await decideApi();
      try{const r=await fetch(`${api}/api/score?url=${encodeURIComponent(targetUrl)}`);const j=await r.json();renderScore(j.score,j.pillars||{});}catch{ $("scoreBand").textContent="Error loading score."; $("scoreCard").classList.remove("loading");}
      try{const r=await fetch(`${api}/report.html?report=analyze&url=${encodeURIComponent(targetUrl)}`);const h=await r.text();const tmp=document.createElement('div');tmp.innerHTML=h;const w=[...tmp.querySelectorAll('h2,h3')].find(x=>/working/i.test(x.textContent));const i=[...tmp.querySelectorAll('h2,h3')].find(x=>/improve|issues?/i.test(x.textContent));if(w){const ul=w.nextElementSibling;if(ul) {setList($("workingList"),[...ul.querySelectorAll('li')].slice(0,5).map(li=>li.textContent));$("workingSection").classList.remove('hidden');}}if(i){const ul=i.nextElementSibling;if(ul){setList($("issuesList"),[...ul.querySelectorAll('li')].slice(0,10).map(li=>li.textContent));$("issuesSection").classList.remove('hidden');}}}catch{}
      completeProgress();
    }

    (function init(){startProgress();startTimeouts();loadAll();})();
  </script>
</body>
</html>
