<!DOCTYPE html>
<html lang="en">
<head>
  <!-- analyze.html ‚Äì v3.6.0 ‚Äì High-level Free Report Version  -->
  <!-- Purpose: Show summary score, top 5 positives, top 10 issues, and strong CTA -->
  <!-- Last updated: October 30, 2025 -->

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SnipeRank ‚Äì AI SEO Analysis (Free Report)</title>

  <style>
    :root {
      --primary: #3182CE;
      --primary-dark: #2563EB;
      --accent-red: #DC3545;
      --border: #E5E7EB;
      --muted: #666;
      --bg: #fff;
      --radius: 12px;
      --max-width: 760px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
      background: var(--bg);
      color: #111;
      padding: 3vh 2rem;
      max-width: var(--max-width);
      margin: 0 auto;
      line-height: 1.6;
    }

    h1 {
      font-size: 3.2rem;
      font-weight: 800;
      margin-bottom: .3em;
      background: linear-gradient(135deg,#000,#3182CE);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    h2 { font-size: 1.6rem; margin-bottom: 1.5rem; font-weight: 700; }
    h3 { font-size: 1.3rem; font-weight: 700; margin: 1.8rem 0 .8rem; }
    p { font-size: 1.05rem; margin-bottom: 1rem; }

    .info-row {
      display: flex; justify-content: space-between; align-items: center;
      font-size: .95rem; color: var(--muted); margin-bottom: 1rem;
    }
    .info-row a { color: var(--primary); font-weight: 600; text-decoration: none; }

    .card {
      background: #fff;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.2rem;
      margin-bottom: 2rem;
      position: relative;
      box-shadow: 0 1px 3px rgba(0,0,0,.08);
      transition: box-shadow .3s;
    }

    /* Pulse shimmer animation */
    .score-card.loading {
      animation: pulse-shimmer 2s ease-in-out infinite;
      overflow: hidden;
    }
    .score-card.loading::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      animation: shimmer 2s ease-in-out infinite;
    }
    @keyframes pulse-shimmer {
      0%,100% { box-shadow: 0 1px 2px rgba(0,0,0,.05); }
      50% { box-shadow: 0 4px 16px rgba(49,130,206,.25); }
    }
    @keyframes shimmer {
      0% { left: -100%; }
      100% { left: 100%; }
    }

    .score-main { display: flex; align-items: baseline; gap: .5rem; }
    .score-number { font-size: 2.5rem; font-weight: 800; }
    .score-band { color: var(--muted); }
    .pillars {
      display: grid; grid-template-columns: 1fr 1fr;
      gap: .75rem; margin-top: 1rem;
    }
    .pillar {
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: .6rem .75rem;
      display: flex; justify-content: space-between; align-items: center;
      font-size: .98rem;
    }
    .pillar .label { font-weight: 600; }
    .badge {
      background: #f9fafb;
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: .2rem .6rem;
      font-weight: 700;
      font-size: .9rem;
    }
    .btn-row { display: flex; gap: .5rem; margin-top: .8rem; }
    .btn-ghost {
      border: 1px solid #111; background: #fff; color: #111;
      padding: .5rem .9rem; border-radius: 8px; cursor: pointer;
      font-weight: 600; font-size: .95rem;
      transition: .2s;
    }
    .btn-ghost:hover { background: #f2f2f2; }

    ul { list-style: disc; margin-left: 1.5rem; margin-bottom: 1rem; }
    li { margin: .4rem 0; }

    .highlight-section {
      border-top: 1px dashed var(--border);
      padding-top: 1rem;
    }

    .cta-section {
      background: #f8f9ff;
      border: 1px solid #e0e7ff;
      border-radius: var(--radius);
      padding: 2rem;
      text-align: center;
      margin-top: 2rem;
    }
    .cta-section h3 { margin-top: 0; color: #1e3a8a; }
    .cta-section p { color: #4338ca; margin-bottom: 1rem; }

    .btn-primary {
      background: var(--accent-red);
      color: #fff;
      border: none;
      padding: .85rem 2rem;
      border-radius: 999px;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      transition: background .2s;
      display: inline-block;
      margin: .5rem;
      text-decoration: none;
    }
    .btn-primary:hover { background: #c82333; }

    .footer {
      text-align: center;
      margin-top: 3rem;
      padding: 1.5rem 0;
      color: var(--muted);
      font-size: .9rem;
    }
    .footer a { color: var(--primary); text-decoration: none; }

    /* Modal */
    .modal-backdrop {
      position: fixed; inset: 0;
      background: rgba(0,0,0,.5);
      display: none; align-items: center; justify-content: center;
      z-index: 1001;
    }
    .modal {
      background: #fff; border-radius: 16px;
      padding: 24px; max-width: 600px; width: 90%;
      box-shadow: 0 20px 60px rgba(0,0,0,.3);
    }
    .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
    .modal-title { font-size: 1.3rem; font-weight: 700; margin: 0; }
    .modal-close {
      background: transparent; border: none; font-size: 1.5rem; cursor: pointer;
      color: #666;
    }
  </style>
</head>
<body>
  <h1>SnipeRank</h1>
  <h2>AI SEO Quick Analysis (Free)</h2>

  <div class="info-row">
    <div>Powered by <a href="https://quontora.com" target="_blank">quontora</a></div>
    <div>Analysis for: <strong id="current-url">-</strong></div>
  </div>

  <section class="card score-card loading" id="scoreCard">
    <div class="score-main">
      <div class="score-number" id="scoreNumber">‚Äì</div>
      <div class="score-band" id="scoreBand">Analyzing...</div>
    </div>
    <div class="pillars" id="pillarsGrid"></div>
    <div class="btn-row">
      <button class="btn-ghost" id="breakdownBtn">What goes into this score?</button>
      <button class="btn-ghost" id="copyBtn">Copy Shareable Summary</button>
    </div>
  </section>

  <section class="highlight-section">
    <h3>What‚Äôs Working Well</h3>
    <ul id="positivesList">
      <li>Loading...</li>
    </ul>

    <h3>Where You Can Improve</h3>
    <ul id="issuesList">
      <li>Loading...</li>
    </ul>
  </section>

  <section class="cta-section">
    <h3>Want the Full Breakdown & Step-by-Step Fixes?</h3>
    <p>Get your detailed 50-page AI SEO report and free 30-minute consultation.</p>
    <a href="#reportForm" class="btn-primary">Get My Full Report (Free)</a>
    <a href="https://calendly.com/quontora" target="_blank" class="btn-primary">Book Consultation</a>
  </section>

  <!-- Full Report Form -->
  <section id="reportForm" class="card" style="margin-top:2rem;">
    <h3>Get Your Detailed Report</h3>
    <form id="full-report-form" novalidate>
      <input type="text" id="name-input" placeholder="Your Name" required style="width:100%;margin-bottom:10px;padding:10px;border:1px solid #ddd;border-radius:4px;">
      <input type="email" id="email-input" placeholder="Your Email" required style="width:100%;margin-bottom:10px;padding:10px;border:1px solid #ddd;border-radius:4px;">
      <textarea id="context-input" placeholder="Optional: Questions or context" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;"></textarea>
      <button type="submit" class="btn-primary" id="full-report-btn" style="margin-top:1rem;">Send My Full Report</button>
      <div id="form-error" style="display:none;color:#c00;margin-top:.5rem;"></div>
    </form>
  </section>

  <div class="footer">
    ¬© 2025 SnipeRank by <a href="https://quontora.com" target="_blank">quontora.com</a>
  </div>

  <!-- Modal -->
  <div id="breakdown-modal" class="modal-backdrop">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title">What Goes Into Your SnipeRank Score?</h3>
        <button class="modal-close" id="modal-close">√ó</button>
      </div>
      <div class="modal-content">
        <p>Your SnipeRank score is based on 50+ AI visibility factors across four pillars:</p>
        <p><strong>üéØ AI Access Readiness</strong> ‚Äî crawlability, indexing, and structure.</p>
        <p><strong>üîí Trust & Verification</strong> ‚Äî authority signals and credibility markers.</p>
        <p><strong>üìù LLM Interpretability</strong> ‚Äî clarity and markup readability.</p>
        <p><strong>üîç Prompt-Pattern Alignment</strong> ‚Äî how well your content matches AI query styles.</p>
      </div>
    </div>
  </div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const targetUrl = urlParams.get("url");
    const apiBase = "https://sniperank-app2.onrender.com";

    function extractDomain(u){
      try {
        const { hostname } = new URL(/^https?:\/\//i.test(u) ? u : `https://${u}`);
        return hostname.replace(/^www\./,'');
      } catch { return ''; }
    }

    async function fetchData() {
      if (!targetUrl) return null;
      const res = await fetch(`${apiBase}/api/score?url=${encodeURIComponent(targetUrl)}`);
      return await res.json();
    }

    function renderData(data) {
      document.getElementById("scoreCard").classList.remove("loading");
      document.getElementById("scoreNumber").textContent = `${data.score}/100`;
      document.getElementById("scoreBand").textContent =
        data.score >= 70 ? "Rank: Highly Visible ‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ" :
        data.score >= 55 ? "Rank: Partially Visible ‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ" :
        data.score >= 40 ? "Rank: Needs Work ‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ" :
        "Rank: Low Visibility ‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ";

      const grid = document.getElementById("pillarsGrid");
      grid.innerHTML = "";
      [
        ["AI Access Readiness", data.pillars.access],
        ["Trust & Verification Signals", data.pillars.trust],
        ["LLM Interpretability & Clarity", data.pillars.clarity],
        ["Prompt-Pattern Alignment", data.pillars.alignment]
      ].forEach(([label, val]) => {
        const div = document.createElement("div");
        div.className = "pillar";
        div.innerHTML = `<span class="label">${label}</span><span class="badge">${val}/25</span>`;
        grid.appendChild(div);
      });

      // Working
      const posList = document.getElementById("positivesList");
      posList.innerHTML = "";
      (data.whatsWorking || []).slice(0,5).forEach(i => {
        const li = document.createElement("li");
        li.textContent = i;
        posList.appendChild(li);
      });

      // Issues
      const issueList = document.getElementById("issuesList");
      issueList.innerHTML = "";
      (data.needsAttention || []).slice(0,10).forEach(i => {
        const li = document.createElement("li");
        li.textContent = i;
        issueList.appendChild(li);
      });
    }

    // Copy summary
    document.getElementById("copyBtn").addEventListener("click", async () => {
      const scoreText = document.getElementById("scoreNumber").textContent;
      const url = targetUrl || "Unknown";
      const text = `Website: ${url}\nSnipeRank Score: ${scoreText}\nCheck your site: ${window.location.origin}`;
      try {
        await navigator.clipboard.writeText(text);
        const btn = document.getElementById("copyBtn");
        const old = btn.textContent;
        btn.textContent = "Copied!";
        setTimeout(() => (btn.textContent = old), 1500);
      } catch {
        window.prompt("Copy this summary:", text);
      }
    });

    // Modal
    document.getElementById("breakdownBtn").onclick = () => {
      document.getElementById("breakdown-modal").style.display = "flex";
    };
    document.getElementById("modal-close").onclick = () => {
      document.getElementById("breakdown-modal").style.display = "none";
    };
    document.getElementById("breakdown-modal").onclick = (e) => {
      if (e.target.id === "breakdown-modal")
        e.currentTarget.style.display = "none";
    };

    // Form
    document.getElementById("full-report-form").addEventListener("submit", (e) => {
      e.preventDefault();
      const name = document.getElementById("name-input").value.trim();
      const email = document.getElementById("email-input").value.trim();
      if (!name || !email) {
        const err = document.getElementById("form-error");
        err.textContent = "Please enter your name and email.";
        err.style.display = "block";
        return;
      }
      const domain = extractDomain(targetUrl);
      const q = new URLSearchParams({ url: targetUrl, name, email, domain }).toString();
      window.location.href = `full-report.html?${q}`;
    });

    // Initialize
    document.addEventListener("DOMContentLoaded", async () => {
      document.getElementById("current-url").textContent = targetUrl || "Unknown";
      try {
        const data = await fetchData();
        if (data) renderData(data);
        else throw new Error("No data");
      } catch (err) {
        document.getElementById("issuesList").innerHTML = "<li>Error loading analysis.</li>";
        console.error(err);
      }
    });
  </script>
</body>
</html>
