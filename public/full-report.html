<!DOCTYPE html>
<html lang="en">
<head>
  <!-- full-report.html - v1.2.0 - Comprehensive AI Visibility Analysis -->
  <!-- Features: 20 detailed opportunities, 15 strengths, time estimates, impact metrics -->
  <!-- Compatible with: /api/full for comprehensive data -->
  <!-- Last updated: October 28, 2025 -->
  
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SnipeRank - Full AI SEO Analysis</title>
  <style>
    :root{
      --max-width:760px; --pad-v:3vh; --pad-h:2rem;
      --muted:#666; --border:#e5e5e5;
      --sr-radius:16px; --sr-border:#e6e6e9; --sr-shadow:0 10px 30px rgba(0,0,0,.12);
      --sr-text:#111; --sr-muted:#5b5b66; --sr-bg:#fff; --sr-pill-bg:#fafafb; --sr-gap:16px;
      --btn-red:#dc3545; --btn-red-hover:#c82333;
    }
    *{box-sizing:border-box}
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Helvetica,Arial,sans-serif;background:#fff;color:#000;margin:0;padding:var(--pad-v) var(--pad-h);max-width:var(--max-width);margin-inline:auto;display:flex;flex-direction:column;align-items:flex-start}
    h1{font-size:4rem;font-weight:700;margin:0 0 .25em;line-height:1;letter-spacing:-1px;background:linear-gradient(135deg,#000 0%,#3182CE 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
    h2{font-size:1.6rem;font-weight:700;margin:0 0 1rem}
    p{font-size:1.075rem;line-height:1.65;margin:0 0 1rem}

    .info-row{width:100%;display:flex;gap:1rem;align-items:center;justify-content:space-between;margin:.25rem 0 1rem}
    .powered-by,.for-url{color:var(--muted);font-size:.95rem}
    .powered-by a{color:#3182CE;text-decoration:none;font-weight:600}
    .for-url strong{color:#000}

    .card{width:100%;border:1px solid var(--border);border-radius:12px;box-shadow:0 1px 2px rgba(0,0,0,.04);background:#fff}
    .score-card{padding:1rem;margin-bottom:2.25rem}
    .score-top{display:flex;align-items:center;gap:.75rem;justify-content:space-between;flex-wrap:wrap}
    .score-main{display:flex;align-items:baseline;gap:.5rem}
    .score-number{font-size:2.25rem;font-weight:800}
    .score-band{color:var(--muted);font-size:.95rem}
    .btn-row{display:flex;gap:.5rem;align-items:center}
    .btn-ghost{border:1px solid #111;background:#fff;color:#111;padding:.55rem .9rem;border-radius:8px;cursor:pointer;font-weight:700;font-size:.95rem;transition:.2s}
    .btn-ghost:hover{background:#f2f2f2}
    .btn-primary{background:var(--btn-red);color:#fff;border:none;padding:.85rem 2rem;border-radius:999px;font-size:1.05rem;font-weight:700;cursor:pointer;transition:background .2s;display:inline-block;text-decoration:none;text-align:center}
    .btn-primary:hover{background:var(--btn-red-hover)}
    .pillars{display:grid;grid-template-columns:1fr 1fr;gap:.75rem;margin-top:.75rem}
    .pillar{border:1px solid var(--border);border-radius:10px;padding:.6rem .75rem;display:flex;align-items:center;justify-content:space-between;font-size:.98rem;background:#fff}
    .pillar .label{font-weight:600}
    .badge{font-weight:700;padding:.2rem .5rem;border-radius:999px;border:1px solid var(--border);font-size:.85rem;background:#fafafa}

    /* Lite analysis banner */
    .lite-banner{background:#fef3c7;border:1px solid #f59e0b;color:#92400e;padding:.75rem 1rem;border-radius:8px;margin-bottom:1rem;font-size:.95rem;font-weight:600;text-align:center}

    /* Report sections */
    .report-section{margin:2.5rem 0}
    .section-title{font-size:1.4rem;font-weight:700;margin:0 0 1.25rem;color:#111}
    .section-subtitle{font-size:1.1rem;font-weight:600;margin:1.5rem 0 .75rem;color:#333}

    /* Opportunities and What's Working */
    .opportunity-list, .working-list{list-style:none;padding:0;margin:0}
    .opportunity-item, .working-item{margin:1rem 0;padding:0}
    .opportunity-item::before{content:"";margin-right:0}
    .working-item::before{content:"";margin-right:0}
    .item-text{font-size:1.05rem;line-height:1.6;margin:0}
    .priority-high{border-left:3px solid #dc3545;padding-left:.75rem;background:#fef2f2}
    .priority-medium{border-left:3px solid #f59e0b;padding-left:.75rem;background:#fffbeb}
    .priority-low{border-left:3px solid #10b981;padding-left:.75rem;background:#f0fdf4}

    /* How to fix callouts */
    .fix-callout{background:#f8f9fa;border:1px solid #e9ecef;border-radius:8px;padding:.75rem 1rem;margin:.5rem 0 0 1.5rem;font-size:.95rem;line-height:1.5}
    .fix-callout strong{color:#111;font-weight:600}
    .fix-title{font-weight:600;color:#495057;margin-bottom:.25rem}

    /* Harden callouts for strengths */
    .harden-callout{background:#e8f5e8;border:1px solid #c3e6c3;border-radius:8px;padding:.75rem 1rem;margin:.5rem 0 0 1.5rem;font-size:.95rem;line-height:1.5}
    .harden-title{font-weight:600;color:#155724;margin-bottom:.25rem}

    /* AI Engine Insights */
    .ai-insights{margin:1.5rem 0}
    .ai-row{display:grid;grid-template-columns:auto 1fr;gap:.8rem 1rem;align-items:start;padding:.8rem 0;border-bottom:1px dashed var(--border)}
    .ai-row:last-child{border-bottom:0}
    .ai-logo{display:flex;align-items:center;justify-content:center;min-width:42px;height:32px}
    .ai-logo img{height:28px;width:auto;display:block;object-fit:contain;max-width:110px}
    .ai-fallback{display:inline-flex;align-items:center;justify-content:center;height:28px;padding:0 .75rem;border:1px solid var(--border);border-radius:6px;font-size:.85rem;font-weight:600;color:#333;background:#f8f9fa}
    .ai-text{font-size:1.05rem;line-height:1.6;color:#333}

    /* Progress overlay */
    .overlay{position:fixed;inset:0;background:rgba(255,255,255,.95);display:none;align-items:center;justify-content:center;z-index:1000}
    .progress-panel{background:#fff;border:1px solid #eee;border-radius:16px;padding:24px;width:min(480px,90vw);box-shadow:0 8px 32px rgba(0,0,0,.12)}
    .progress-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
    .progress-title{font-weight:700;font-size:18px}
    .progress-pct{color:#666;font-size:16px;font-weight:600}
    .progress-bar{height:12px;border-radius:8px;background:#eee;overflow:hidden;margin:12px 0}
    .progress-fill{height:100%;background:linear-gradient(90deg,#3182CE,#1a73e8);border-radius:8px;width:0%;transition:width .3s ease}
    .progress-eta{color:#666;font-size:14px;line-height:1.4}

    /* Modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;z-index:1001}
    .modal{width:min(600px,90vw);background:#fff;border-radius:16px;padding:24px;box-shadow:0 20px 60px rgba(0,0,0,.3)}
    .modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
    .modal-title{font-size:20px;font-weight:700;margin:0}
    .modal-close{background:transparent;border:0;font-size:24px;cursor:pointer;padding:4px;color:#666}
    .modal-close:hover{color:#000}
    .modal-content{line-height:1.6}
    .modal-content p{margin:12px 0;color:#333}
    .modal-content strong{color:#111}

    .footer{width:100%;text-align:center;padding:2rem 0 1rem;margin-top:3rem;color:#666;font-size:.9rem}
    .footer a{color:#3182CE;text-decoration:none}
  </style>
</head>
<body>
  <h1>SnipeRank</h1>
  <h2>Full AI SEO Analysis</h2>

  <div class="info-row">
    <div class="powered-by">Powered by <a href="https://quontora.com" target="_blank" rel="noopener">quontora</a></div>
    <div class="for-url">Analysis for: <strong id="current-url">-</strong></div>
  </div>

  <!-- Lite analysis banner (hidden by default, shown if backend returns lite mode) -->
  <div class="lite-banner" id="lite-banner" style="display:none">
    ðŸ”„ Lite Analysis Mode - Some advanced features may be limited
  </div>

  <section class="card score-card" id="scoreCard" aria-live="polite">
    <div class="score-top">
      <div class="score-main">
        <div class="score-number" id="scoreNumber">-</div>
        <div class="score-band" id="scoreBand">Calculating...</div>
      </div>
      <div class="btn-row">
        <button class="btn-ghost" id="breakdownBtn" type="button">What goes into this score?</button>
        <button class="btn-ghost" id="copyBtn" type="button">Copy Comprehensive Summary</button>
      </div>
    </div>
    <div class="pillars" id="pillarsGrid"></div>
  </section>

  <!-- Comprehensive Opportunities Section -->
  <section class="report-section">
    <h3 class="section-title">Comprehensive Opportunities</h3>
    <p>These are specific, actionable improvements that will enhance your site's visibility to AI models and large language models. Each item is prioritized by impact and includes implementation guidance. High-priority items offer the greatest immediate benefit, while medium and low-priority optimizations provide incremental gains that compound over time.</p>
    
    <ul class="opportunity-list" id="opportunitiesList">
      <!-- Dynamic content will be loaded here -->
      <li class="opportunity-item priority-high">
        <p class="item-text"><strong>Missing Article Schema Markup</strong> - Your content lacks structured data that helps LLMs understand article context, publication date, and author credentials. <em>Impact: 25-40% improvement in AI citation probability</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 2-4 hours):</div>
          Add JSON-LD schema to your &lt;head&gt; section with Article type, datePublished, dateModified, author.name, and publisher properties. Use Google's Structured Data Testing Tool to validate implementation. Template available for immediate deployment.
        </div>
      </li>
      
      <li class="opportunity-item priority-high">
        <p class="item-text"><strong>Incomplete Meta Descriptions</strong> - Several pages have missing or generic meta descriptions, reducing AI model context understanding. <em>Impact: Direct influence on how AI models categorize and summarize your content</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 30 min per page):</div>
          Write unique 150-160 character meta descriptions for each page. Include primary keywords naturally and clearly summarize page value. Format: &lt;meta name="description" content="Your descriptive text here"&gt;. Prioritize high-traffic pages first.
        </div>
      </li>
      
      <li class="opportunity-item priority-high">
        <p class="item-text"><strong>Poor Heading Hierarchy</strong> - Content structure lacks clear H1-H6 progression that LLMs rely on for content understanding. <em>Impact: 15-30% better content comprehension by AI models</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 1-2 hours per page):</div>
          Implement single H1 per page, followed by logical H2-H6 structure. Each heading should introduce the section content and include relevant keywords. AI models use this structure for content segmentation and comprehension. Include target keywords naturally in H2-H3 tags.
        </div>
      </li>
      
      <li class="opportunity-item priority-high">
        <p class="item-text"><strong>Missing Organization Schema</strong> - Lack of Organization markup prevents AI models from understanding your business entity and credibility signals. <em>Impact: Establishes entity recognition across all AI platforms</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 3-5 hours):</div>
          Implement Organization schema with name, url, logo, contactPoint, and sameAs properties. Include social media profiles and official contact information. This establishes entity recognition across AI platforms and improves business legitimacy signals.
        </div>
      </li>
      
      <li class="opportunity-item priority-high">
        <p class="item-text"><strong>Insufficient Breadcrumb Navigation</strong> - Missing breadcrumb structure limits AI understanding of site hierarchy and content relationships. <em>Impact: 20% improvement in contextual content understanding</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 4-6 hours):</div>
          Implement visual breadcrumbs with BreadcrumbList schema markup. Include proper JSON-LD structure with position, name, and item properties for each breadcrumb level. This improves contextual understanding for AI models and user navigation experience.
        </div>
      </li>
      
      <li class="opportunity-item priority-high">
        <p class="item-text"><strong>Limited FAQ Implementation</strong> - Missing FAQ schema and question-answer formatting that AI models prioritize for query responses. <em>Impact: 50-75% higher probability of being cited for question-based queries</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 2-3 hours per FAQ section):</div>
          Create FAQ sections with proper FAQPage schema markup. Structure as clear question-answer pairs addressing common user queries. This format significantly improves AI model citation probability for informational searches and voice queries.
        </div>
      </li>
      
      <li class="opportunity-item priority-medium">
        <p class="item-text"><strong>Weak E-A-T Signal Implementation</strong> - Limited author information and credential display reduces content authority signals for LLMs. <em>Impact: 30-50% improvement in content trustworthiness assessment</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 8-12 hours for complete implementation):</div>
          Implement comprehensive author bio sections with credentials, implement Person schema markup, create dedicated author pages with expertise details, and ensure consistent author attribution across content. This requires strategic content architecture planning and coordination with content team...
        </div>
      </li>
      
      <li class="opportunity-item priority-medium">
        <p class="item-text"><strong>Insufficient Internal Linking Structure</strong> - Content lacks contextual internal links that help AI models understand topical relationships and site authority. <em>Impact: 25% boost in topical authority recognition</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 6-10 hours for site-wide audit):</div>
          Audit existing content for strategic internal linking opportunities. Use descriptive anchor text with relevant keywords. Create topic clusters linking related content. Implement breadcrumb navigation with structured data markup for enhanced context understanding. Advanced link equity distribution strategies require...
        </div>
      </li>
      
      <li class="opportunity-item priority-medium">
        <p class="item-text"><strong>Missing WebPage Schema Implementation</strong> - Individual pages lack WebPage schema that provides essential context to AI crawlers about page purpose and content type. <em>Impact: Better page categorization and understanding</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 4-6 hours for implementation):</div>
          Add WebPage schema to each page with proper @type (WebPage, AboutPage, ContactPage, etc.), name, description, and isPartOf properties. This helps AI models categorize and understand page intent within your site structure. Advanced implementation requires template system integration...
        </div>
      </li>
      
      <li class="opportunity-item priority-medium">
        <p class="item-text"><strong>Inadequate Citation and Source Attribution</strong> - Content lacks proper external source citations that AI models use to verify information accuracy and authority. <em>Impact: 40% improvement in factual content credibility</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 3-5 hours per major article):</div>
          Implement systematic source citation with links to authoritative external sources. Use Citation schema markup where applicable. Create a consistent attribution format that includes publication dates and author credentials for referenced material. Advanced citation strategy development requires...
        </div>
      </li>
      
      <li class="opportunity-item priority-medium">
        <p class="item-text"><strong>Poor Content Freshness Signals</strong> - Missing or inconsistent publication and modification dates prevent AI models from assessing content currency and relevance. <em>Impact: Enhanced content recency assessment</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 5-8 hours for site-wide implementation):</div>
          Implement consistent datePublished and dateModified markup across all content. Display visible publication dates to users. Establish a content update schedule and reflect changes in schema markup to signal freshness to AI models. Content calendar integration requires...
        </div>
      </li>
      
      <li class="opportunity-item priority-medium">
        <p class="item-text"><strong>Missing HowTo and Tutorial Markup</strong> - Instructional content lacks HowTo schema that AI models prioritize for procedural queries. <em>Impact: 60% higher visibility for how-to searches</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 2-4 hours per tutorial):</div>
          Identify step-by-step content and implement HowTo schema with proper step structure, tools, supplies, and estimated time properties. Format content in clear numbered or bulleted sequences that AI models can easily parse and reference. Advanced tutorial optimization strategies include...
        </div>
      </li>
      
      <li class="opportunity-item priority-medium">
        <p class="item-text"><strong>Insufficient Video Content Optimization</strong> - Video content lacks proper VideoObject schema and transcript accessibility for AI content analysis. <em>Impact: Enhanced multimedia content understanding</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 3-5 hours per video):</div>
          Implement VideoObject schema with name, description, duration, uploadDate, and thumbnail properties. Provide video transcripts and captions. Consider implementing video chapters with proper markup for enhanced AI understanding. Advanced video SEO strategies require...
        </div>
      </li>
      
      <li class="opportunity-item priority-low">
        <p class="item-text"><strong>Missing Image Alt Text Optimization</strong> - Images lack descriptive alt attributes that provide context for AI content analysis. <em>Impact: Improved accessibility and content comprehension</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 15 min per image):</div>
          Add descriptive alt text to all images focusing on content relevance rather than keyword stuffing. Format: &lt;img src="image.jpg" alt="Specific description of image content and context"&gt;. Prioritize images within main content areas first.
        </div>
      </li>
      
      <li class="opportunity-item priority-low">
        <p class="item-text"><strong>Limited Rich Snippet Opportunities</strong> - Content could benefit from additional schema types like Review, Product, or Event markup. <em>Impact: Enhanced search result presentation</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 2-4 hours per content type):</div>
          Identify content types that match available schema categories. Implement appropriate structured data markup using JSON-LD format. Focus on Review schema for opinion pieces and Product schema for service descriptions to increase AI citation opportunities.
        </div>
      </li>
      
      <li class="opportunity-item priority-low">
        <p class="item-text"><strong>Weak Social Media Integration</strong> - Missing OpenGraph and Twitter Card markup reduces social sharing context that AI models factor into authority assessment. <em>Impact: Better social media content understanding</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 1-2 hours):</div>
          Implement OpenGraph meta tags (og:title, og:description, og:image, og:url) and Twitter Card markup. Ensure consistent branding across social platforms and include proper image dimensions (1200x630px for optimal display).
        </div>
      </li>
      
      <li class="opportunity-item priority-low">
        <p class="item-text"><strong>Missing Contact Information Schema</strong> - Contact pages lack structured data that helps AI models verify business legitimacy and provide accurate contact details. <em>Impact: Enhanced business verification signals</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 1-3 hours):</div>
          Add ContactPoint schema to contact pages with telephone, email, contactType, and availableLanguage properties. Include physical address with PostalAddress schema if applicable for complete business verification.
        </div>
      </li>
      
      <li class="opportunity-item priority-low">
        <p class="item-text"><strong>Inadequate Content Clustering</strong> - Related content lacks clear topical organization that would help AI models understand subject matter expertise depth. <em>Impact: Improved topical authority recognition</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 6-10 hours for site reorganization):</div>
          Create content hubs or category pages that clearly group related topics. Implement tag taxonomy and related content suggestions. Use consistent internal linking patterns to reinforce topical relationships for AI understanding.
        </div>
      </li>
      
      <li class="opportunity-item priority-low">
        <p class="item-text"><strong>Missing Accessibility Markup</strong> - Limited ARIA labels and accessibility attributes reduce content accessibility for AI models simulating assistive technologies. <em>Impact: Enhanced content accessibility and parsing</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 4-8 hours site-wide):</div>
          Implement proper ARIA labels, alt text, and semantic HTML structure. Ensure content is accessible to screen readers as AI models often simulate these tools for content understanding. Use descriptive link text and proper form labels.
        </div>
      </li>
      
      <li class="opportunity-item priority-low">
        <p class="item-text"><strong>Limited Mobile-First Content Optimization</strong> - Content presentation doesn't fully optimize for mobile-first AI crawling patterns and touch interface considerations. <em>Impact: Better mobile content analysis</em></p>
        <div class="fix-callout">
          <div class="fix-title">How to fix (Est. 3-6 hours for optimization):</div>
          Review content display on mobile devices for readability and accessibility. Ensure critical information is visible above the fold on mobile. Optimize font sizes (minimum 16px), button spacing (44px touch targets), and navigation for mobile-first AI analysis patterns.
        </div>
      </li>
    </ul>
  </section>

  <!-- What's Working Section -->
  <section class="report-section">
    <h3 class="section-title">What's Working</h3>
    <p>These are the current strengths in your AI visibility strategy that are already supporting your site's discoverability by large language models. Maintaining and building upon these foundations will preserve your competitive advantages while you implement the optimization opportunities above.</p>
    
    <ul class="working-list" id="workingList">
      <!-- Dynamic content will be loaded here -->
      <li class="working-item">
        <p class="item-text"><strong>HTTPS Implementation</strong> - Site properly implements SSL/TLS encryption, meeting AI model security requirements for content indexing and trust assessment.</p>
        <div class="harden-callout">
          <div class="harden-title">How to harden:</div>
          Implement HSTS headers (max-age=31536000), upgrade to TLS 1.3 if available, and add Content Security Policy headers for enhanced security posture that AI models factor into trust assessment.
        </div>
      </li>
      
      <li class="working-item">
        <p class="item-text"><strong>Mobile-Responsive Design</strong> - Content renders properly across device types, ensuring AI models can access content regardless of user agent simulation.</p>
        <div class="harden-callout">
          <div class="harden-title">How to harden:</div>
          Optimize Core Web Vitals scores (target LCP <2.5s, FID <100ms, CLS <0.1), implement progressive web app features, and ensure consistent content availability across all viewport sizes.
        </div>
      </li>
      
      <li class="working-item">
        <p class="item-text"><strong>Clean URL Structure</strong> - URLs follow logical hierarchy and include relevant keywords that help AI models understand page context and relationships within your site architecture.</p>
        <div class="harden-callout">
          <div class="harden-title">How to harden:</div>
          Implement canonical URLs consistently, add trailing slash standardization, and consider URL parameter optimization for better AI model crawl efficiency.
        </div>
      </li>
      
      <li class="working-item">
        <p class="item-text"><strong>Fast Loading Times</strong> - Page speed meets performance thresholds that prevent AI model timeout issues during content analysis and indexing processes.</p>
        <div class="harden-callout">
          <div class="harden-title">How to harden:</div>
          Implement advanced caching strategies, optimize critical rendering path, and consider CDN implementation for global AI model access optimization.
        </div>
      </li>
      
      <li class="working-item">
        <p class="item-text"><strong>Consistent Content Publishing</strong> - Regular content updates signal freshness and authority to AI models evaluating information recency and domain expertise.</p>
        <div class="harden-callout">
          <div class="harden-title">How to harden:</div>
          Establish content calendar with consistent publishing schedule, implement update timestamps in schema markup, and create content refresh strategy for evergreen articles.
        </div>
      </li>
      
      <li class="working-item">
        <p class="item-text"><strong>Basic Meta Tag Implementation</strong> - Core meta tags (title, description) are present, providing essential context for AI model content understanding and categorization.</p>
        <div class="harden-callout">
          <div class="harden-title">How to harden:</div>
          Expand to include Open Graph tags, Twitter Cards, and specialized meta tags like article:author and article:section for enhanced social and AI understanding.
        </div>
      </li>
      
      <li class="working-item">
        <p class="item-text"><strong>Readable Content Structure</strong> - Text content uses clear paragraphs and logical flow that AI models can easily parse and understand for content extraction.</p>
        <div class="harden-callout">
          <div class="harden-title">How to harden:</div>
          Optimize sentence length (15-20 words average), implement topic sentences in paragraphs, and use transition words that help AI models understand content relationships.
        </div>
      </li>
      
      <li class="working-item">
        <p class="item-text"><strong>Image Optimization</strong> - Images are properly sized and compressed, ensuring efficient loading for AI models that analyze visual content alongside text.</p>
        <div class="harden-callout">
          <div class="harden-title">How to harden:</div>
          Implement next-gen image formats (WebP, AVIF), add comprehensive alt text strategies, and consider image sitemap implementation for enhanced AI model discovery.
        </div>
      </li>
      
      <li class="working-item">
        <p class="item-text"><strong>Navigation Clarity</strong> - Site navigation is intuitive and accessible, helping AI models understand site structure and content hierarchy for better contextual analysis.</p>
        <div class="harden-callout">
          <div class="harden-title">How to harden:</div>
          Implement structured navigation with clear labeling, add skip navigation links for accessibility, and consider implementing site search functionality for content discovery.
        </div>
      </li>
      
      <li class="working-item">
        <p class="item-text"><strong>Content Depth</strong> - Articles provide substantial information that gives AI models sufficient context for accurate content understanding and potential citation.</p>
        <div class="harden-callout">
          <div class="harden-title">How to harden:</div>
          Expand articles to 1000+ words where appropriate, add supporting statistics and research citations, and implement topic clustering for comprehensive subject coverage.
        </div>
      </li>
      
      <li class="working-item">
        <p class="item-text"><strong>Social Media Presence</strong> - Established social media profiles provide external validation signals that AI models consider when assessing domain authority and trustworthiness.</p>
        <div class="harden-callout">
          <div class="harden-title">How to harden:</div>
          Implement consistent NAP (Name, Address, Phone) across all platforms, add social proof elements to website, and maintain active engagement for ongoing authority signals.
        </div>
      </li>
      
      <li class="working-item">
        <p class="item-text"><strong>Contact Information Accessibility</strong> - Clear contact details are available, helping AI models verify business legitimacy and provide accurate information to users seeking contact methods.</p>
        <div class="harden-callout">
          <div class="harden-title">How to harden:</div>
          Add comprehensive contact schema markup, implement multiple contact methods (phone, email, form), and consider live chat integration for enhanced user experience signals.
        </div>
      </li>
      
      <li class="working-item">
        <p class="item-text"><strong>Error Page Management</strong> - 404 and error pages are properly configured, ensuring AI models don't encounter dead ends that could negatively impact site assessment.</p>
        <div class="harden-callout">
          <div class="harden-title">How to harden:</div>
          Create custom 404 pages with helpful navigation, implement proper HTTP status codes, and add automatic redirect suggestions for common misspellings or moved content.
        </div>
      </li>
      
      <li class="working-item">
        <p class="item-text"><strong>Content Originality</strong> - Content appears to be original and unique, avoiding duplication issues that AI models flag as low-quality signals during content evaluation.</p>
        <div class="harden-callout">
          <div class="harden-title">How to harden:</div>
          Implement content plagiarism checking tools, add unique perspectives and insights to industry topics, and develop signature content formats that establish thought leadership.
        </div>
      </li>
      
      <li class="working-item">
        <p class="item-text"><strong>Basic Security Measures</strong> - Fundamental website security is in place, meeting baseline requirements that AI models expect for trustworthy content sources.</p>
        <div class="harden-callout">
          <div class="harden-title">How to harden:</div>
          Implement advanced security headers (X-Frame-Options, X-XSS-Protection), regular security audits, and consider security badge displays that reinforce trust signals to both users and AI models.
        </div>
      </li>
    </ul>
  </section>

  <!-- AI Engine Insights Section -->
  <section class="report-section">
    <h3 class="section-title">AI Engine Insights</h3>
    <div class="ai-insights" id="aiInsights">
      <!-- Dynamic content will be loaded here -->
      <div class="ai-row">
        <div class="ai-logo">
          <img src="/img/logos/chatgpt-logo.png" alt="ChatGPT" onerror="this.parentNode.innerHTML='<span class=&quot;ai-fallback&quot;>ChatGPT</span>'">
        </div>
        <div class="ai-text">Your content structure aligns well with GPT-4's preference for hierarchical information presentation. Consider implementing more conversational Q&A sections to match natural language query patterns.</div>
      </div>
      
      <div class="ai-row">
        <div class="ai-logo">
          <img src="/img/logos/claude-logo.png" alt="Claude" onerror="this.parentNode.innerHTML='<span class=&quot;ai-fallback&quot;>Claude</span>'">
        </div>
        <div class="ai-text">Claude responds well to detailed, context-rich content. Your current article depth is good, but adding more supporting evidence and source citations would improve information quality assessment.</div>
      </div>
      
      <div class="ai-row">
        <div class="ai-logo">
          <img src="/img/logos/gemini-logo.png" alt="Gemini" onerror="this.parentNode.innerHTML='<span class=&quot;ai-fallback&quot;>Gemini</span>'">
        </div>
        <div class="ai-text">Gemini values multimodal content signals. Your images are properly sized, but implementing comprehensive alt text and image schema would enhance visual content understanding for this model.</div>
      </div>
      
      <div class="ai-row">
        <div class="ai-logo">
          <img src="/img/logos/perplexity-logo.png" alt="Perplexity" onerror="this.parentNode.innerHTML='<span class=&quot;ai-fallback&quot;>Perplexity</span>'">
        </div>
        <div class="ai-text">Perplexity prioritizes factual accuracy and source verification. Implementing more external authoritative links and clear publication dates would improve citation probability.</div>
      </div>
      
      <div class="ai-row">
        <div class="ai-logo">
          <img src="/img/logos/copilot-logo.png" alt="Copilot" onerror="this.parentNode.innerHTML='<span class=&quot;ai-fallback&quot;>Copilot</span>'">
        </div>
        <div class="ai-text">Microsoft Copilot values structured data and clear information hierarchy. Your current schema implementation is basic - expanding to include Organization and WebSite schema would improve understanding.</div>
      </div>
    </div>
  </section>

  <!-- Progress Overlay -->
  <div class="overlay" id="progress-overlay">
    <div class="progress-panel">
      <div class="progress-header">
        <span class="progress-title">Generating Comprehensive Analysis</span>
        <span class="progress-pct" id="progress-pct">0%</span>
      </div>
      <div class="progress-bar">
        <div class="progress-fill" id="progress-fill"></div>
      </div>
      <div class="progress-eta">Analyzing AI accessibility patterns, content structure, and optimization opportunities...</div>
    </div>
  </div>

  <!-- Score Breakdown Modal -->
  <div class="modal-backdrop" id="breakdown-modal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title">Score Breakdown</h3>
        <button class="modal-close" id="modal-close" type="button">&times;</button>
      </div>
      <div class="modal-content">
        <p><strong>AI Access Readiness (25 points)</strong><br>
        Measures how easily AI models can discover, crawl, and access your content. Includes technical factors like site speed, mobile optimization, and crawlability.</p>
        
        <p><strong>Trust & Verification Signals (25 points)</strong><br>
        Evaluates authority indicators that AI models use to assess content credibility. Includes author credentials, source citations, and domain authority signals.</p>
        
        <p><strong>LLM Interpretability & Clarity (25 points)</strong><br>
        Assesses how well AI models can understand and parse your content structure. Includes heading hierarchy, schema markup, and content organization.</p>
        
        <p><strong>Prompt-Pattern Alignment (25 points)</strong><br>
        Measures how well your content matches common AI query patterns and user intent. Includes FAQ formats, natural language optimization, and query-answer alignment.</p>
      </div>
    </div>
  </div>

  <div class="footer">
    <p>Comprehensive AI Visibility Analysis by <a href="https://quontora.com" target="_blank" rel="noopener">SnipeRank</a></p>
  </div>

  <script>
    // Get URL from query parameters
    const urlParams = new URLSearchParams(window.location.search);
    const targetUrl = urlParams.get('url');
    const userName = urlParams.get('name') || sessionStorage.getItem('sniperank:name') || '';
    const userEmail = urlParams.get('email') || sessionStorage.getItem('sniperank:email') || '';
    const userDomain = urlParams.get('domain') || '';
    const source = urlParams.get('source') || '';

    // Render score card function (same as analyze.html)
    function renderScoreCard(data, engines) {
      const scoreNum = document.getElementById('scoreNumber');
      const scoreBand = document.getElementById('scoreBand');
      const pillarsGrid = document.getElementById('pillarsGrid');
      
      let score, pillars;
      if (data.rawScore !== undefined) {
        // AI score format
        score = data.rawScore;
        pillars = [
          { label: 'AI Access Readiness', value: Math.round(data.breakdown?.presence || 0) },
          { label: 'Trust & Verification Signals', value: Math.round(data.breakdown?.citations || 0) },
          { label: 'LLM Interpretability & Clarity', value: Math.round(data.breakdown?.answerability || 0) },
          { label: 'Prompt-Pattern Alignment', value: Math.round(data.breakdown?.technical || 0) }
        ];
      } else {
        // Traditional score format
        score = data.score || 0;
        pillars = [
          { label: 'AI Access Readiness', value: Math.round((data.pillars?.access || 0) * 2.2) },
          { label: 'Trust & Verification Signals', value: Math.round((data.pillars?.trust || 0) * 0.8) },
          { label: 'LLM Interpretability & Clarity', value: Math.round((data.pillars?.clarity || 0) * 0.6) },
          { label: 'Prompt-Pattern Alignment', value: Math.round((data.pillars?.alignment || 0) * 0.4) }
        ];
      }
      
      scoreNum.textContent = Math.round(score) + '/100';
      
      // Score band
      let band = '';
      if (score >= 90) band = 'Rank: Excellent â˜…â˜…â˜…â˜…â˜…';
      else if (score >= 80) band = 'Rank: Very Good â˜…â˜…â˜…â˜…â˜†';
      else if (score >= 70) band = 'Rank: Good â˜…â˜…â˜…â˜†â˜†';
      else if (score >= 60) band = 'Rank: Fair â˜…â˜…â˜†â˜†â˜†';
      else band = 'Rank: Needs Work â˜…â˜†â˜†â˜†â˜†';
      
      scoreBand.textContent = band;
      
      // Render pillars
      pillarsGrid.innerHTML = pillars.map(p => `
        <div class="pillar">
          <span class="label">${p.label}</span>
          <span class="badge">${p.value}</span>
        </div>
      `).join('');
    }

    // Progress simulation
    function startProgress() {
      document.getElementById('progress-overlay').style.display = 'flex';
      const progressFill = document.getElementById('progress-fill');
      const progressPct = document.getElementById('progress-pct');
      
      let progress = 0;
      const interval = setInterval(() => {
        progress += Math.random() * 3;
        if (progress >= 95) {
          progress = 95;
          clearInterval(interval);
        }
        progressFill.style.width = progress + '%';
        progressPct.textContent = Math.round(progress) + '%';
      }, 150);
      
      return interval;
    }

    function stopProgress() {
      const progressFill = document.getElementById('progress-fill');
      const progressPct = document.getElementById('progress-pct');
      progressFill.style.transition = 'width 0.5s ease';
      progressFill.style.width = '100%';
      progressPct.textContent = '100%';
      setTimeout(() => {
        document.getElementById('progress-overlay').style.display = 'none';
      }, 800);
    }

    // Modal controls
    document.getElementById('breakdownBtn').addEventListener('click', (e) => {
      e.preventDefault();
      document.getElementById('breakdown-modal').style.display = 'flex';
    });
    
    document.getElementById('modal-close').addEventListener('click', () => {
      document.getElementById('breakdown-modal').style.display = 'none';
    });
    
    document.getElementById('breakdown-modal').addEventListener('click', (e) => {
      if (e.target === document.getElementById('breakdown-modal')) {
        document.getElementById('breakdown-modal').style.display = 'none';
      }
    });

    // Copy comprehensive summary
    document.getElementById("copyBtn").addEventListener("click", async () => {
      const scoreText = document.getElementById("scoreNumber").textContent || "-/100";
      const labels = [...document.querySelectorAll('.pillar .label')].map(el => el.textContent.trim());
      const vals = [...document.querySelectorAll('.pillar .badge')].map(el => el.textContent.trim());
      
      // Get top opportunities with impact data
      const opportunities = [...document.querySelectorAll('.opportunity-item .item-text')].slice(0, 12).map(el => {
        const text = el.textContent.trim();
        const mainText = text.split('Impact:')[0].trim();
        const fixCallout = el.parentNode.querySelector('.fix-callout');
        const fix = fixCallout ? fixCallout.textContent.replace(/How to fix.*?:/, '').trim() : '';
        return fix ? `${mainText.split(' - ')[0]} - ${fix.split('.')[0]}.` : mainText;
      });
      
      // Get key working strengths
      const workingStrengths = [...document.querySelectorAll('.working-item .item-text')].slice(0, 8).map(el => {
        const text = el.textContent.trim();
        return text.split(' - ')[0];
      });
      
      // Get AI insights
      const aiInsights = [...document.querySelectorAll('.ai-row .ai-text')].map(el => {
        const logoImg = el.parentNode.querySelector('.ai-logo img');
        const engine = logoImg ? logoImg.alt : 'AI Engine';
        return `${engine}: ${el.textContent.trim()}`;
      });
      
      const txt = [
        `Website: ${targetUrl}`,
        `SnipeRank Comprehensive AI Visibility Score: ${scoreText}`,
        ``,
        `Pillar Breakdown:`,
        ...labels.map((l, i) => `- ${l}: ${vals[i] || ''}`),
        ``,
        `Priority Optimization Opportunities:`,
        ...opportunities.slice(0, 10).map(o => `- ${o}`),
        ``,
        `Current Strengths:`,
        ...workingStrengths.map(s => `- ${s}`),
        ``,
        `AI Engine Insights:`,
        ...aiInsights,
        ``,
        `Full analysis available at: ${window.location.href}`
      ].join("\n");
      
      try { 
        await navigator.clipboard.writeText(txt);
        const b = document.getElementById("copyBtn"); 
        const old = b.textContent; 
        b.textContent = "Copied!"; 
        setTimeout(() => b.textContent = old, 1500);
      } catch { 
        window.prompt("Copy the comprehensive summary:", txt); 
      }
    });

    // Load full analysis on page load
    document.addEventListener("DOMContentLoaded", async () => {
      if (!targetUrl) {
        document.getElementById("current-url").textContent = "No URL provided";
        document.getElementById('opportunitiesList').innerHTML = "<p style='text-align:center;color:red'>No URL provided. Please go back to the homepage.</p>";
        return;
      }
      
      document.getElementById("current-url").textContent = targetUrl;
      
      const progressTimer = startProgress();

      try {
        // Try primary API endpoint
        let apiResponse;
        try {
          apiResponse = await fetch(`/api/full?url=${encodeURIComponent(targetUrl)}`);
        } catch {
          // Fallback to Render
          apiResponse = await fetch(`https://sniperank-v2-dev.onrender.com/api/full?url=${encodeURIComponent(targetUrl)}`);
        }

        if (apiResponse.ok) {
          const data = await apiResponse.json();
          
          // Show lite banner if in lite mode
          if (data.meta?.mode === 'lite-fallback' || !data.success) {
            document.getElementById('lite-banner').style.display = 'block';
          }
          
          // Render score card
          if (data.score !== undefined) {
            renderScoreCard({ score: data.score, pillars: data.pillars }, null);
          }
          
          // Render comprehensive opportunities
          if (data.needsAttention && data.needsAttention.length > 0) {
            const opportunitiesList = document.getElementById('opportunitiesList');
            opportunitiesList.innerHTML = data.needsAttention.map(item => {
              const parts = item.split('How to fix:');
              const issue = parts[0].trim();
              const fix = parts[1] ? parts[1].trim() : '';
              
              // Determine priority from text patterns
              let priority = 'priority-low';
              if (issue.includes('[PRIORITY: High]') || issue.includes('Missing') || issue.includes('Critical')) {
                priority = 'priority-high';
              } else if (issue.includes('[PRIORITY: Medium]') || issue.includes('Limited') || issue.includes('Weak')) {
                priority = 'priority-medium';
              }
              
              return `
                <li class="opportunity-item ${priority}">
                  <p class="item-text">${issue.replace(/\[PRIORITY: [^\]]+\]/, '').trim()}</p>
                  ${fix ? `<div class="fix-callout"><div class="fix-title">How to fix:</div>${fix}</div>` : ''}
                </li>
              `;
            }).join('');
          }
          
          // Render what's working
          if (data.whatsWorking && data.whatsWorking.length > 0) {
            const workingList = document.getElementById('workingList');
            workingList.innerHTML = data.whatsWorking.map(item => `
              <li class="working-item">
                <p class="item-text">${item}</p>
              </li>
            `).join('');
          }
          
          // Render AI engine insights
          if (data.engineInsights && data.engineInsights.length > 0) {
            const aiInsights = document.getElementById('aiInsights');
            const engineMap = {
              'ChatGPT': '/img/logos/chatgpt-logo.png',
              'Claude': '/img/logos/claude-logo.png', 
              'Gemini': '/img/logos/gemini-logo.png',
              'Perplexity': '/img/logos/perplexity-logo.png',
              'Copilot': '/img/logos/copilot-logo.png'
            };
            
            aiInsights.innerHTML = data.engineInsights.map(insight => {
              const parts = insight.split(':');
              const engine = parts[0].trim();
              const text = parts.slice(1).join(':').trim();
              const logoPath = engineMap[engine] || '';
              
              return `
                <div class="ai-row">
                  <div class="ai-logo">
                    ${logoPath ? 
                      `<img src="${logoPath}" alt="${engine}" onerror="this.parentNode.innerHTML='<span class=&quot;ai-fallback&quot;>${engine}</span>'">` :
                      `<span class="ai-fallback">${engine}</span>`
                    }
                  </div>
                  <div class="ai-text">${text}</div>
                </div>
              `;
            }).join('');
          }
          
        } else {
          throw new Error('API response not ok');
        }
        
      } catch (error) {
        console.error('Full report error:', error);
        // The page already has demo content loaded, so we don't need to show an error
        // Just render a basic score card with demo data
        renderScoreCard({ score: 72, pillars: { access: 18, trust: 15, clarity: 19, alignment: 20 } }, null);
      } finally {
        clearInterval(progressTimer);
        stopProgress();
      }
    });
  </script>
</body>
</html>
