<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SnipeRank â€” AI SEO Analysis Results</title>
  <style>
    :root {
      --max-width: 760px;
      --pad-v: 5vh;
      --pad-h: 2rem;
    }

    body {
      font-family: Helvetica, sans-serif;
      background: #fff;
      color: #000;
      margin: 0;
      padding: var(--pad-v) var(--pad-h);
      max-width: var(--max-width);
      margin-left: auto;
      margin-right: auto;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }

    h1 {
      font-size: 4rem;
      font-weight: 700;
      margin: 0 0 0.25em 0;
      line-height: 1;
      letter-spacing: -1px;
    }

    h2 {
      font-size: 1.5rem;
      font-weight: 400;
      margin: 0 0 2rem 0;
    }

    h3 {
      font-size: 1.2rem;
      font-weight: 500;
      margin: 2rem 0 1rem 0;
    }

    p {
      font-size: 1.1rem;
      line-height: 1.75;
      margin-bottom: 1rem;
    }

    #analyzed-url {
      text-align: center;
      margin-bottom: 2rem;
      color: #666;
    }

    #current-url {
      color: #000;
      font-weight: 500;
    }

    #summary-results {
      width: 100%;
      margin: 2rem 0;
      padding: 0;
      background: none;
      border: none;
    }

    .section-title {
      font-size: 1.5rem;
      font-weight: 700;
      margin: 3rem 0 1.5rem 0;
      color: #000;
      letter-spacing: -0.5px;
      border-bottom: 2px solid #000;
      padding-bottom: 0.5rem;
    }

    ul {
      margin: 0 0 2rem 0;
      padding-left: 0;
      list-style: none;
    }

    li {
      margin-bottom: 1.5rem;
      line-height: 1.75;
      padding-left: 0;
      font-size: 1.1rem;
    }

    li strong {
      font-weight: 600;
      color: #000;
    }

    /* AI Engine Insights Styling */
    .ai-engines-section {
      margin: 3rem 0 2rem 0;
    }

    .ai-engines-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .ai-engine-card {
      display: flex;
      align-items: center;
      padding: 1rem;
      background: #f8f8f8;
      border: 1px solid #ddd;
      border-radius: 4px;
    }

    .ai-engine-logo {
      width: 20px;
      height: 20px;
      margin-right: 0.75rem;
      flex-shrink: 0;
    }

    .ai-engine-info {
      display: flex;
      flex-direction: column;
    }

    .ai-engine-name {
      font-weight: 600;
      font-size: 0.9rem;
      color: #000;
      margin: 0;
    }

    .ai-engine-company {
      font-size: 0.75rem;
      color: #666;
      margin: 0;
    }

    .ai-insights-list {
      margin-top: 1rem;
    }

    .ai-insights-list li {
      display: flex;
      align-items: flex-start;
      padding: 0.75rem;
      background: #f9f9f9;
      border-left: 3px solid #000;
      margin-bottom: 1rem;
      font-size: 1rem;
    }

    .insight-icon {
      width: 16px;
      height: 16px;
      margin-right: 0.5rem;
      margin-top: 0.1rem;
      flex-shrink: 0;
    }

    .new-analysis-section {
      text-align: center;
      margin: 2rem 0;
      padding: 1rem;
      border-top: 1px solid #ddd;
      width: 100%;
    }

    .new-analysis-form {
      display: flex;
      gap: 1rem;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
    }

    .new-analysis-form input {
      flex: 1;
      max-width: 400px;
      min-width: 250px;
    }

    .full-report-form {
      width: 100%;
      margin-top: 3rem;
      padding-top: 2rem;
      border-top: 2px solid #000;
    }

    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .form-full-width {
      margin-top: 1rem;
    }

    input, textarea {
      font-size: 1.05rem;
      padding: 0.8rem 1rem;
      border: 1px solid #000;
      width: 100%;
      background: transparent;
      box-sizing: border-box;
    }

    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
    }

    button {
      font-size: 1rem;
      font-weight: 500;
      padding: 0.8rem 1.5rem;
      border: none;
      color: #fff;
      background: #000;
      cursor: pointer;
      margin-top: 1rem;
    }

    button:hover {
      background: #333;
    }

    .form-button-wrapper {
      text-align: center;
      margin-top: 1.5rem;
    }

    #formMessage {
      text-align: center;
      margin-top: 1rem;
      font-weight: 500;
    }

    .footer {
      font-size: 0.85rem;
      color: #666;
      margin-top: 3rem;
      text-align: center;
      width: 100%;
    }

    @media (max-width: 600px) {
      .new-analysis-form {
        flex-direction: column;
      }
      
      .new-analysis-form input {
        max-width: 100%;
      }
      
      .form-grid {
        grid-template-columns: 1fr;
      }

      .ai-engines-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <h1>SnipeRank</h1>
  <h2>AI SEO Analysis Results</h2>

  <div id="analyzed-url">
    <p>Analysis for: <strong id="current-url"></strong></p>
  </div>

  <section id="summary-results">
    <p style="text-align: center; color: gray;">Loading analysis...</p>
  </section>

  <!-- AI Engine Insights Section -->
  <section class="ai-engines-section">
    <div class="section-title">ðŸ¤– AI Engine Insights</div>
    
    <div class="ai-engines-grid">
      <!-- ChatGPT -->
      <div class="ai-engine-card">
        <svg class="ai-engine-logo" viewBox="0 0 24 24">
          <circle cx="12" cy="12" r="10" fill="#10A37F"/>
          <path d="M12 6v12M6 12h12" stroke="white" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <div class="ai-engine-info">
          <div class="ai-engine-name">ChatGPT</div>
          <div class="ai-engine-company">OpenAI</div>
        </div>
      </div>

      <!-- Gemini -->
      <div class="ai-engine-card">
        <svg class="ai-engine-logo" viewBox="0 0 24 24">
          <defs>
            <linearGradient id="geminiGrad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#4285F4"/>
              <stop offset="25%" style="stop-color:#34A853"/>
              <stop offset="50%" style="stop-color:#FBBC04"/>
              <stop offset="75%" style="stop-color:#EA4335"/>
              <stop offset="100%" style="stop-color:#4285F4"/>
            </linearGradient>
          </defs>
          <polygon points="12,2 22,8 22,16 12,22 2,16 2,8" fill="url(#geminiGrad)"/>
          <circle cx="12" cy="12" r="3" fill="white"/>
        </svg>
        <div class="ai-engine-info">
          <div class="ai-engine-name">Gemini</div>
          <div class="ai-engine-company">Google</div>
        </div>
      </div>

      <!-- Copilot -->
      <div class="ai-engine-card">
        <svg class="ai-engine-logo" viewBox="0 0 24 24">
          <rect width="24" height="24" rx="4" fill="#0078D4"/>
          <path d="M7 8h10v2H7zM7 11h10v2H7zM7 14h6v2H7z" fill="white"/>
          <circle cx="19" cy="15" r="2" fill="#FFB900"/>
        </svg>
        <div class="ai-engine-info">
          <div class="ai-engine-name">Copilot</div>
          <div class="ai-engine-company">Microsoft</div>
        </div>
      </div>

      <!-- Perplexity -->
      <div class="ai-engine-card">
        <svg class="ai-engine-logo" viewBox="0 0 24 24">
          <rect width="24" height="24" rx="12" fill="#1FB6FF"/>
          <path d="M8 8l8 8M16 8l-8 8" stroke="white" stroke-width="2" stroke-linecap="round"/>
          <circle cx="12" cy="12" r="2" fill="white"/>
        </svg>
        <div class="ai-engine-info">
          <div class="ai-engine-name">Perplexity</div>
          <div class="ai-engine-company">Perplexity AI</div>
        </div>
      </div>

      <!-- Claude -->
      <div class="ai-engine-card">
        <svg class="ai-engine-logo" viewBox="0 0 24 24">
          <rect width="24" height="24" rx="4" fill="#D97706"/>
          <path d="M12 4a8 8 0 100 16 8 8 0 000-16zm0 2a6 6 0 110 12 6 6 0 010-12z" fill="white"/>
          <circle cx="12" cy="12" r="3" fill="#D97706"/>
        </svg>
        <div class="ai-engine-info">
          <div class="ai-engine-name">Claude</div>
          <div class="ai-engine-company">Anthropic</div>
        </div>
      </div>
    </div>

    <ul class="ai-insights-list" id="aiInsightsList">
      <!-- AI insights will be populated here by JavaScript -->
    </ul>
  </section>

  <section class="new-analysis-section">
    <h3>Analyze Another Website</h3>
    <form id="newAnalysisForm" class="new-analysis-form">
      <input type="text" id="newUrl" placeholder="Enter another URL..." required />
      <button type="submit">Analyze</button>
    </form>
  </section>

  <section class="full-report-form">
    <h3>Want the Full Report?</h3>
    <p>Get a comprehensive analysis with specific recommendations for improving your AI visibility.</p>

    <form id="fullReportForm">
      <div class="form-grid">
        <div>
          <label for="name">Full Name *</label>
          <input type="text" id="name" name="name" required />
        </div>
        <div>
          <label for="company">Company Name</label>
          <input type="text" id="company" name="company" />
        </div>
        <div>
          <label for="email">Email Address *</label>
          <input type="email" id="email" name="email" required />
        </div>
        <div>
          <label for="phone">Phone Number *</label>
          <input type="tel" id="phone" name="phone" required />
        </div>
      </div>

      <div class="form-full-width">
        <label for="message">What challenges are you looking to address?</label>
        <textarea id="message" name="message" rows="4" placeholder="We can help you reach you're goals"></textarea>
      </div>

      <div class="form-button-wrapper">
        <button type="submit">Send My Full Report</button>
      </div>

      <div id="formMessage"></div>
    </form>
  </section>

  <div class="footer">&copy; 2025 SnipeRank. Last updated July 26.</div>

  <script>
    // Load short report
    document.addEventListener("DOMContentLoaded", async () => {
      const urlParams = new URLSearchParams(window.location.search);
      const targetUrl = urlParams.get("url");

      if (!targetUrl) {
        document.getElementById("summary-results").innerHTML =
          "<p style='color:red; text-align:center;'>No URL provided.</p>";
        return;
      }

      // Display the URL being analyzed
      document.getElementById("current-url").textContent = targetUrl;

      const requestUrl = `https://sniperank-backend-newjuly23.onrender.com/report.html?url=${encodeURIComponent(targetUrl)}`;

      try {
        const res = await fetch(requestUrl);
        const html = await res.text();
        document.getElementById("summary-results").innerHTML = html;

        // Add AI insights if they exist in the response
        addAIInsights();
      } catch (err) {
        console.error("Fetch error:", err);
        document.getElementById("summary-results").innerHTML =
          "<p style='color:red; text-align:center;'>Failed to load report.</p>";
      }
    });

    // Add AI insights to the dedicated section
    function addAIInsights() {
      const insightsList = document.getElementById("aiInsightsList");
      
      // Sample AI insights - replace with actual data from your API
      const insights = [
        "Your content structure is well-optimized for ChatGPT's understanding and indexing.",
        "Gemini may have difficulty parsing your site's schema markup implementation.",
        "Microsoft Copilot can effectively surface your business information in search results.",
        "Perplexity AI shows strong citation potential for your expertise-based content.",
        "Claude can easily understand your content hierarchy and topic clustering."
      ];

      const engines = ['ChatGPT', 'Gemini', 'Copilot', 'Perplexity', 'Claude'];
      
      insights.forEach((insight, index) => {
        const li = document.createElement('li');
        li.innerHTML = `
          <svg class="insight-icon" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10" fill="#10A37F"/>
            <path d="M12 6v12M6 12h12" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          <strong>${engines[index]}:</strong> ${insight}
        `;
        insightsList.appendChild(li);
      });
    }

    // Handle new URL analysis
    document.getElementById("newAnalysisForm").addEventListener("submit", function (e) {
      e.preventDefault();
      let url = document.getElementById("newUrl").value.trim();
      
      if (!url) return;
      
      if (!/^https?:\/\//i.test(url)) {
        url = "https://" + url;
      }
      
      window.location.href = `test.html?url=${encodeURIComponent(url)}`;
    });

    // Form submission
    document.getElementById("fullReportForm").addEventListener("submit", async function (e) {
      e.preventDefault();

      const formMessage = document.getElementById("formMessage");
      formMessage.innerHTML = "Thanks! We'll email your full report within 24 hours.";
      formMessage.style.color = "green";
      
      // Reset form
      this.reset();
    });
  </script>
</body>
</html>
